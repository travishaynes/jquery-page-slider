(function(){window.PageSlider=function(){function a(a){var b,c,d,e;a==null&&(a={}),e=this,this.el=a.el||this.el,this.easing=a.easing||this.easing,this.duration=a.duration||this.duration,this.tagCurrent=a.tagCurrent||this.tagCurrent,this.tagCurrent&&$("a[href='"+location.pathname+"']").addClass("current"),window.history!=null&&window.history.pushState!=null&&$(window).bind("popstate",function(a){if(a.originalEvent.state==null)return;return e.slide(a.originalEvent.state)}),b=$("<div>"),d=$("<div>"),c=$(this.el).html(),b.html(c).attr("id","current-page").css({position:"absolute",left:"0",top:"0",width:"100%"}),d.attr("id","next-page").css({position:"absolute",left:"100%",top:"0",width:"100%"}),$(this.el).html("").append(b).append(d)}return a.prototype.el="#main",a.prototype.easing="linear",a.prototype.duration="fast",a.prototype.tagCurrent=!0,a.prototype.bindTo=function(a,b){var c;return c=this,$(a).live(b,function(a){var b;$("#next-page").animate({opacity:.25}),$("#current-page").animate({opacity:.25}).addClass("loading"),a.preventDefault();if(c.sliding>0)return;b=$(this).attr("href");if(location.pathname===b)return;return $.ajax({type:"get",url:b,error:function(a,b,c){throw c},success:function(a){var d,e;d=$("<html>").html(a),e={href:b,title:d.find("title").text(),content:d.find("#main").html()},c.slide(e);if(window.history!=null&&window.history.pushState!=null)return history.pushState(e,e.title,e.href)}})})},a.prototype.slide=function(a){var b;return this.tagCurrent&&($("a.current").removeClass("current"),$("a[href='"+a.href+"']").addClass("current")),b=this,this.sliding=2,document.title=a.title,$("#current-page").stop().removeClass("loading").animate({left:"-100%"},{easing:this.easing,duration:this.duration,complete:function(){return $(this).html("").attr("id","next-page").css({left:"100%"}),b.sliding-=1}}),$("#next-page").stop().html(a.content).animate({left:"0%",opacity:1},{easing:this.easing,duration:this.duration,complete:function(){return $(this).attr("id","current-page"),b.sliding-=1}})},a}()}).call(this)